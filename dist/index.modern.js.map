{"version":3,"file":"index.modern.js","sources":["../src/predicate.ts","../src/utils.ts","../src/match.ts"],"sourcesContent":["const predicate = {\n\tnullish: <T extends undefined | null>(value: any): value is T =>\n\t\t[undefined, null].includes(value),\n\tnumber: (value: any): value is number =>\n\t\t!predicate.nullish(value) &&\n\t\t!Number.isNaN(value) &&\n\t\tObject.getPrototypeOf(value) === Number.prototype,\n\tnan: (value: any): value is typeof NaN =>\n\t\t!predicate.nullish(value) && Number.isNaN(value),\n\tstring: (value: any): value is string =>\n\t\t!predicate.nullish(value) &&\n\t\tObject.getPrototypeOf(value) === String.prototype,\n\tboolean: (value: any): value is boolean =>\n\t\t!predicate.nullish(value) &&\n\t\tObject.getPrototypeOf(value) === Boolean.prototype,\n\tset: (value: any): value is Set<any> =>\n\t\t!predicate.nullish(value) && Object.getPrototypeOf(value) === Set.prototype,\n\tmap: (value: any): value is Map<any, any> =>\n\t\t!predicate.nullish(value) && Object.getPrototypeOf(value) === Map.prototype,\n\tarray: (value: any): value is Array<any> =>\n\t\t!predicate.nullish(value) && Array.isArray(value),\n\tobject: (value: any): value is object =>\n\t\t!predicate.nullish(value) &&\n\t\tObject.getPrototypeOf(value) === Object.prototype,\n\tsymbol: (value: any): value is Symbol =>\n\t\t!predicate.nullish(value) &&\n\t\tObject.getPrototypeOf(value) === Symbol.prototype,\n\tfunction: (value: any): value is Function =>\n\t\t!predicate.nullish(value) &&\n\t\tObject.getPrototypeOf(value) === Function.prototype,\n\tany: (value?: any) => true\n};\n\nexport default predicate;\n","import predicate from './predicate';\n\nconst isEqual = (a: any, b: any): boolean => {\n\tconst equality = {\n\t\tarray:\n\t\t\tpredicate.array(a) &&\n\t\t\tpredicate.array(b) &&\n\t\t\ta.length === b.length &&\n\t\t\ta.every((el, idx) => b[idx] === el),\n\t\tobject:\n\t\t\tpredicate.object(a) &&\n\t\t\tpredicate.object(b) &&\n\t\t\tArray.from(new Set([...Object.keys(a), ...Object.keys(b)])).every(\n\t\t\t\t(key) =>\n\t\t\t\t\ta.hasOwnProperty(key) &&\n\t\t\t\t\tb.hasOwnProperty(key) &&\n\t\t\t\t\tisEqual(a[key as keyof typeof a], b[key as keyof typeof b])\n\t\t\t),\n\t\tnan: predicate.nan(a) && predicate.nan(b),\n\t\tset:\n\t\t\t!predicate.nullish(a) &&\n\t\t\t!predicate.nullish(b) &&\n\t\t\tpredicate.set(a) &&\n\t\t\tpredicate.set(b) &&\n\t\t\tArray.from(a).every((el) => b.has(el)),\n\t\tmap:\n\t\t\t!predicate.nullish(a) &&\n\t\t\t!predicate.nullish(b) &&\n\t\t\tpredicate.map(a) &&\n\t\t\tpredicate.map(b) &&\n\t\t\tArray.from(a.keys()).every(\n\t\t\t\t(key) =>\n\t\t\t\t\tb.has(key) && b[key as keyof typeof b] === a[key as keyof typeof a]\n\t\t\t),\n\t\tother: a === b\n\t};\n\treturn Object.values(equality).some(Boolean);\n};\n\nexport { isEqual };\n","import predicate from './predicate';\nimport { isEqual } from './utils';\n\nconst isMatching = <I, P extends Pattern<I> | Predicate<I>>(\n\tp: P,\n\tvalue: I\n): boolean => {\n\tif (predicate.function(p)) {\n\t\treturn p(value);\n\t}\n\tif (\n\t\t((predicate.object(value) && predicate.object(p)) ||\n\t\t\t(predicate.array(value) && predicate.array(p))) &&\n\t\tObject.keys(value).length &&\n\t\tObject.keys(p).length &&\n\t\tObject.keys(p).every((key) => key in value)\n\t) {\n\t\treturn Object.keys(p).every((key) =>\n\t\t\tisMatching(p[key as keyof P], value[key as keyof I])\n\t\t);\n\t}\n\treturn isEqual(value, p);\n};\n\nclass MatchExpression<I, O> {\n\tresult!: O;\n\tconstructor(private value: I) {}\n\n\twith<P extends Pattern<I> | Predicate<I>>(\n\t\tp: P,\n\t\thandler: (value: I) => O\n\t): MatchExpression<I, O> {\n\t\tif (isMatching(p, this.value)) {\n\t\t\tthis.result = handler(this.value);\n\t\t}\n\t\treturn this;\n\t}\n\n\totherwise(handler: (value: I) => O): MatchExpression<I, O> {\n\t\tthis.result = handler(this.value);\n\t\treturn this;\n\t}\n\n\trun() {\n\t\treturn this.result;\n\t}\n}\n\nconst match = <T extends any>(value: T) => new MatchExpression(value);\nexport { match, isMatching };\n"],"names":["predicate","nullish","value","undefined","includes","number","Number","isNaN","Object","getPrototypeOf","prototype","nan","string","String","boolean","Boolean","set","Set","map","Map","array","Array","isArray","object","symbol","Symbol","function","Function","any","isEqual","a","b","equality","length","every","el","idx","from","keys","key","hasOwnProperty","has","other","values","some","isMatching","p","MatchExpression","constructor","result","this","with","handler","otherwise","run","match"],"mappings":"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"}